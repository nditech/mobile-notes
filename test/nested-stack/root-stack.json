{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "This template uses nested stacks to provision the notes app. Version: 1.0.1",
    
    "Resources": {
        "DynamoDBTable": {
            "Type": "AWS::CloudFormation::Stack",
            "Properties": {
                "Parameters": {
                    "TableName": {
                        "Fn::Sub": "${AWS::StackName}-table"
                    }
                },
                "TemplateURL": "https://s3.amazonaws.com/ndi-tech-cloudformation-templates/dynamodb-table.json"
            }
        },
        "S3WebsiteReact": {
            "Type": "AWS::CloudFormation::Stack",
            "Properties": {
                "Parameters": {
                    "BucketName": {
                        "Fn::Sub": "${AWS::StackName}-website"
                    }
                },
                "TemplateURL": "https://s3.amazonaws.com/ndi-tech-cloudformation-templates/s3-static-website-react.json"
            }
        },
        "S3UploadBucket": {
            "Type": "AWS::CloudFormation::Stack",
            "Properties": {
                "Parameters": {
                    "BucketName": {
                        "Fn::Sub": "${AWS::StackName}-upload"
                    }
                },
                "TemplateURL": "https://s3.amazonaws.com/ndi-tech-cloudformation-templates/s3-with-cors.json"
            }
        },
        "Cognito": {
            "Type": "AWS::CloudFormation::Stack",
            "Properties": {
                "Parameters": {
                    "CognitoUserPoolName": {
                        "Fn::Sub": "${AWS::StackName}-pool"
                    }
                },
                "TemplateURL": "https://s3.amazonaws.com/ndi-tech-cloudformation-templates/cognito-userpool.json"
            },
            "DependsOn": "DynamoDBTable"
        },
        "ApiGateway": {
            "Type": "AWS::CloudFormation::Stack",
            "Properties": {
                "Parameters": {
                    "ApiGatewayName": {
                        "Fn::Sub": "${AWS::StackName}-api"
                    },
                    "DynamoDBStack": {
                        "Fn::GetAtt": [ "DynamoDBTable", "Outputs.DDBStackName" ]
                    }
                },
                "TemplateURL": "https://s3.amazonaws.com/ndi-tech-cloudformation-templates/api-gateway.json"
            },
            "DependsOn": "DynamoDBTable"
        }
    },

    "Outputs": {

    }
}